---

title: Config API


keywords: fastai
sidebar: home_sidebar

summary: "config API for instantiating `objects` from `LightningCV`"
description: "config API for instantiating `objects` from `LightningCV`"
nb_path: "nbs/00_config.ipynb"
---
<!--

#################################################
### THIS FILE WAS AUTOGENERATED! DO NOT EDIT! ###
#################################################
# file to edit: nbs/00_config.ipynb
# command to build the docs after a change: nbdev_build_docs

-->

<div class="container" id="notebook-container">
        
    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="kn">from</span> <span class="nn">omegaconf</span> <span class="kn">import</span> <span class="n">OmegaConf</span>
<span class="kn">from</span> <span class="nn">fastcore.test</span> <span class="kn">import</span> <span class="n">test_eq</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">

<div class="output_area">




<div id="6228706d-ec23-4397-bae8-14f36bfe89fc"></div>
<div class="output_subarea output_javascript ">
<script type="text/javascript">
var element = $('#6228706d-ec23-4397-bae8-14f36bfe89fc');

            setTimeout(function() {
                var nbb_cell_id = 5;
                var nbb_unformatted_code = "# for tests\nfrom omegaconf import OmegaConf\nfrom fastcore.test import test_eq";
                var nbb_formatted_code = "# for tests\nfrom omegaconf import OmegaConf\nfrom fastcore.test import test_eq";
                var nbb_cells = Jupyter.notebook.get_cells();
                for (var i = 0; i < nbb_cells.length; ++i) {
                    if (nbb_cells[i].input_prompt_number == nbb_cell_id) {
                        if (nbb_cells[i].get_text() == nbb_unformatted_code) {
                             nbb_cells[i].set_text(nbb_formatted_code);
                        }
                        break;
                    }
                }
            }, 500);
            
</script>
</div>

</div>

</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

<div class="output_wrapper">
<div class="output">

<div class="output_area">


<div class="output_markdown rendered_html output_subarea ">
<h4 id="get_cfg" class="doc_header"><code>get_cfg</code><a href="https://github.com/benihime91/lightning_cv/tree/master/lightning_cv/config.py#L11" class="source_link" style="float:right">[source]</a></h4><blockquote><p><code>get_cfg</code>(<strong><code>config_name</code></strong>=<em><code>'config'</code></em>, <strong><code>strict</code></strong>=<em><code>False</code></em>, <strong><code>overrides</code></strong>:<code>List</code>[<code>str</code>]=<em><code>[]</code></em>, <strong><code>return_hydra_config</code></strong>:<code>bool</code>=<em><code>False</code></em>)</p>
</blockquote>
<p>Get a copy of the default config</p>

</div>

</div>

</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

<div class="output_wrapper">
<div class="output">

<div class="output_area">




<div id="d36b313d-e6be-4d5b-bf2c-898076a96fb8"></div>
<div class="output_subarea output_javascript ">
<script type="text/javascript">
var element = $('#d36b313d-e6be-4d5b-bf2c-898076a96fb8');

            setTimeout(function() {
                var nbb_cell_id = 6;
                var nbb_unformatted_code = "# export\n@delegates(compose)\ndef get_cfg(config_name=\"classification\", strict=False, **kwargs) -> DictConfig:\n    \"Get a copy of the default config\"\n    with initialize_config_module(\"lightning_cv.configs\"):\n        cfg = compose(config_name=config_name, strict=False, **kwargs)\n    return cfg";
                var nbb_formatted_code = "# export\n@delegates(compose)\ndef get_cfg(config_name=\"classification\", strict=False, **kwargs) -> DictConfig:\n    \"Get a copy of the default config\"\n    with initialize_config_module(\"lightning_cv.configs\"):\n        cfg = compose(config_name=config_name, strict=False, **kwargs)\n    return cfg";
                var nbb_cells = Jupyter.notebook.get_cells();
                for (var i = 0; i < nbb_cells.length; ++i) {
                    if (nbb_cells[i].input_prompt_number == nbb_cell_id) {
                        if (nbb_cells[i].get_text() == nbb_unformatted_code) {
                             nbb_cells[i].set_text(nbb_formatted_code);
                        }
                        break;
                    }
                }
            }, 500);
            
</script>
</div>

</div>

</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">cfg</span> <span class="o">=</span> <span class="n">get_cfg</span><span class="p">()</span>
<span class="nb">print</span><span class="p">(</span><span class="n">OmegaConf</span><span class="o">.</span><span class="n">to_yaml</span><span class="p">(</span><span class="n">cfg</span><span class="p">))</span>
</pre></div>

    </div>
</div>
</div>
<details class="description">
      <summary data-open="Hide Output" data-close="Show Output"></summary>
        <summary></summary>
        
<div class="output_wrapper">
<div class="output">

<div class="output_area">

<div class="output_subarea output_stream output_stdout output_text">
<pre>SEED: 42
CUDNN_BENCHMARK: false
INPUT:
  SIZE_TRAIN: 255
  SIZE_VALID: 255
  MEAN_TRAIN:
  - 0.485
  - 0.456
  - 0.406
  STD_TRAIN:
  - 0.229
  - 0.224
  - 0.225
  MEAN_VALID:
  - 0.485
  - 0.456
  - 0.406
  STD_VALID:
  - 0.229
  - 0.224
  - 0.225
DATASETS:
  TRAIN: &#39; &#39;
  VALID: &#39; &#39;
DATALOADER:
  NUM_WORKERS: 4
  SHUFFLE_TRAIN: true
  TRAIN_BATCH_SIZE: 32
  SHUFFLE_VALID: true
  VALID_BATCH_SIZE: 32
  PIN_MEMORY: true
METRICS:
  TRAIN:
  - _target_: pytorch_lightning.metrics.classification.accuracy.Accuracy
    threshold: 0.5
    top_k: null
  VALID:
  - _target_: pytorch_lightning.metrics.classification.accuracy.Accuracy
    threshold: 0.5
    top_k: null
SOLVER:
  BASE_LR: 0.001
  LR_MULT: 0.01
  WEIGHT_DECAY: 0.0001
  ZERO_WEIGHT_DECAY_BACKBONE: false
  PARAM_SPLITTER: default_split
TRANSFORMS:
  TRAIN:
    LOADER: pil_loader
    NAME: GenericImageTransform
    ARGUMENTS:
      img_size: ${INPUT.SIZE_TRAIN}
      interpolation: random
      hflip: 0.5
      vflip: 0.5
      color_jitter: 0.4
      re_prob: 0.5
      re_mode: pixel
      re_count: 1
      mean: ${INPUT.MEAN_TRAIN}
      std: ${INPUT.STD_TRAIN}
  VALID:
    LOADER: pil_loader
    NAME: ImagenetNoAugmentTransform
    ARGUMENTS:
      img_size: ${INPUT.SIZE_VALID}
      interpolation: bilinear
      mean: ${INPUT.MEAN_VALID}
      std: ${INPUT.STD_VALID}
MIXMETHOD:
  _target_: lightning_cv.classification.data.mixmethods.NoMix
MODEL:
  BACKBONE:
    NAME: TimmBackBoneBase
    ARGUMENTS:
      model_name: efficientnet_b0
      cut: null
      act_layer: null
      pretrained: true
      drop_path_rate: 0.3
  CLASSIFIER:
    NAME: GeneralClassifier
    ARGUMENTS:
      num_features: ???
      num_classes: ???
      drop_rate: 0.25
      pool_type: avg
      use_conv: false
OPTIMIZER:
  NAME: Ranger
  ARGUMENTS:
    lr: ${SOLVER.BASE_LR}
    betas:
    - 0.95
    - 0.999
    eps: 1.0e-05
    weight_decay: ${SOLVER.WEIGHT_DECAY}
    k: 6
    alpha: 0.5
SCHEDULER:
  NAME: FlatCos
  ARGUMENTS:
    pct_start: 0.72
    max_iters: null
  INTERVAL: step
  FREQUENCY: 1
  MONITOR: null
LOSS:
  _target_: torch.nn.modules.loss.CrossEntropyLoss
  size_average: None
  ignore_index: -100
  reduce: None
  reduction: mean

</pre>
</div>
</div>

<div class="output_area">




<div id="36cd515e-15fa-4e6b-bd2e-fee8d5e9b304"></div>
<div class="output_subarea output_javascript ">
<script type="text/javascript">
var element = $('#36cd515e-15fa-4e6b-bd2e-fee8d5e9b304');

            setTimeout(function() {
                var nbb_cell_id = 7;
                var nbb_unformatted_code = "# collapse-output\ncfg = get_cfg()\nprint(OmegaConf.to_yaml(cfg))";
                var nbb_formatted_code = "# collapse-output\ncfg = get_cfg()\nprint(OmegaConf.to_yaml(cfg))";
                var nbb_cells = Jupyter.notebook.get_cells();
                for (var i = 0; i < nbb_cells.length; ++i) {
                    if (nbb_cells[i].input_prompt_number == nbb_cell_id) {
                        if (nbb_cells[i].get_text() == nbb_unformatted_code) {
                             nbb_cells[i].set_text(nbb_formatted_code);
                        }
                        break;
                    }
                }
            }, 500);
            
</script>
</div>

</div>

</div>
</div>

    </details>
</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">cfg</span><span class="o">.</span><span class="n">VERSION</span> <span class="o">=</span> <span class="s2">&quot;something&quot;</span>
<span class="n">test_eq</span><span class="p">(</span><span class="n">cfg</span><span class="o">.</span><span class="n">VERSION</span><span class="p">,</span> <span class="s2">&quot;something&quot;</span><span class="p">)</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">

<div class="output_area">




<div id="0f40733f-eb65-4cb4-8c13-e6234772340f"></div>
<div class="output_subarea output_javascript ">
<script type="text/javascript">
var element = $('#0f40733f-eb65-4cb4-8c13-e6234772340f');

            setTimeout(function() {
                var nbb_cell_id = 8;
                var nbb_unformatted_code = "# modify a existing key\ncfg.VERSION = \"something\"\ntest_eq(cfg.VERSION, \"something\")";
                var nbb_formatted_code = "# modify a existing key\ncfg.VERSION = \"something\"\ntest_eq(cfg.VERSION, \"something\")";
                var nbb_cells = Jupyter.notebook.get_cells();
                for (var i = 0; i < nbb_cells.length; ++i) {
                    if (nbb_cells[i].input_prompt_number == nbb_cell_id) {
                        if (nbb_cells[i].get_text() == nbb_unformatted_code) {
                             nbb_cells[i].set_text(nbb_formatted_code);
                        }
                        break;
                    }
                }
            }, 500);
            
</script>
</div>

</div>

</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

<div class="output_wrapper">
<div class="output">

<div class="output_area">


<div class="output_markdown rendered_html output_subarea ">
<h4 id="set_global_cfg" class="doc_header"><code>set_global_cfg</code><a href="https://github.com/benihime91/lightning_cv/tree/master/lightning_cv/config.py#L19" class="source_link" style="float:right">[source]</a></h4><blockquote><p><code>set_global_cfg</code>(<strong><code>cfg</code></strong>:<code>DictConfig</code>)</p>
</blockquote>
<p>Let the global config point to the given cfg.
Assume that the given "cfg" has the key "KEY", after calling
<code>set_global_cfg(cfg)</code>, the key can be accessed by:</p>
<div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">.config</span> <span class="kn">import</span> <span class="n">global_cfg</span>
    <span class="nb">print</span><span class="p">(</span><span class="n">global_cfg</span><span class="o">.</span><span class="n">KEY</span><span class="p">)</span>
</pre></div>
<p>By using a hacky global config, you can access these configs anywhere,
without having to pass the config object or the values deep into the code.
This is a hacky feature introduced for quick prototyping / research exploration.</p>

</div>

</div>

</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

<div class="output_wrapper">
<div class="output">

<div class="output_area">




<div id="3c3bd769-9368-45b5-9f95-e369363ba381"></div>
<div class="output_subarea output_javascript ">
<script type="text/javascript">
var element = $('#3c3bd769-9368-45b5-9f95-e369363ba381');

            setTimeout(function() {
                var nbb_cell_id = 9;
                var nbb_unformatted_code = "# export\ndef set_global_cfg(cfg: DictConfig) -> None:\n    \"\"\"\n    Let the global config point to the given cfg.\n    Assume that the given \"cfg\" has the key \"KEY\", after calling\n    `set_global_cfg(cfg)`, the key can be accessed by:\n    ```python\n        from lightning_cv.config import global_cfg\n        print(global_cfg.KEY)\n    ```\n    By using a hacky global config, you can access these configs anywhere,\n    without having to pass the config object or the values deep into the code.\n    This is a hacky feature introduced for quick prototyping / research exploration.\n    \"\"\"\n    global global_cfg\n    global_cfg = cfg";
                var nbb_formatted_code = "# export\ndef set_global_cfg(cfg: DictConfig) -> None:\n    \"\"\"\n    Let the global config point to the given cfg.\n    Assume that the given \"cfg\" has the key \"KEY\", after calling\n    `set_global_cfg(cfg)`, the key can be accessed by:\n    ```python\n        from lightning_cv.config import global_cfg\n        print(global_cfg.KEY)\n    ```\n    By using a hacky global config, you can access these configs anywhere,\n    without having to pass the config object or the values deep into the code.\n    This is a hacky feature introduced for quick prototyping / research exploration.\n    \"\"\"\n    global global_cfg\n    global_cfg = cfg";
                var nbb_cells = Jupyter.notebook.get_cells();
                for (var i = 0; i < nbb_cells.length; ++i) {
                    if (nbb_cells[i].input_prompt_number == nbb_cell_id) {
                        if (nbb_cells[i].get_text() == nbb_unformatted_code) {
                             nbb_cells[i].set_text(nbb_formatted_code);
                        }
                        break;
                    }
                }
            }, 500);
            
</script>
</div>

</div>

</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

<div class="output_wrapper">
<div class="output">

<div class="output_area">


<div class="output_markdown rendered_html output_subarea ">
<h4 id="get_class_path" class="doc_header"><code>get_class_path</code><a href="https://github.com/benihime91/lightning_cv/tree/master/lightning_cv/config.py#L36" class="source_link" style="float:right">[source]</a></h4><blockquote><p><code>get_class_path</code>()</p>
</blockquote>
<p>utility for building the class path</p>

</div>

</div>

</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

<div class="output_wrapper">
<div class="output">

<div class="output_area">




<div id="b0a2dc1e-4b6b-4cbe-89e0-11b71e56614d"></div>
<div class="output_subarea output_javascript ">
<script type="text/javascript">
var element = $('#b0a2dc1e-4b6b-4cbe-89e0-11b71e56614d');

            setTimeout(function() {
                var nbb_cell_id = 10;
                var nbb_unformatted_code = "# export\ndef get_class_path(cls):\n    \"utility for building the class path\"\n    return f\"{cls.__module__}.{cls.__name__}\"";
                var nbb_formatted_code = "# export\ndef get_class_path(cls):\n    \"utility for building the class path\"\n    return f\"{cls.__module__}.{cls.__name__}\"";
                var nbb_cells = Jupyter.notebook.get_cells();
                for (var i = 0; i < nbb_cells.length; ++i) {
                    if (nbb_cells[i].input_prompt_number == nbb_cell_id) {
                        if (nbb_cells[i].get_text() == nbb_unformatted_code) {
                             nbb_cells[i].set_text(nbb_formatted_code);
                        }
                        break;
                    }
                }
            }, 500);
            
</script>
</div>

</div>

</div>
</div>

</div>
    {% endraw %}

</div>
 

